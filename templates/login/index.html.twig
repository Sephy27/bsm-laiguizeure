{# templates/login/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Connexion - BSM L'Aiguiz'Eure{% endblock %}

{% block body %}
<main class="py-5" style="background: #f4f4f4;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-md-8 col-lg-5">

                {# En-tête / intro #}
                <div class="text-center mb-4">
                    <div class="d-inline-flex align-items-center justify-content-center mb-2"
                         style="width:60px;height:60px;border-radius:50%;background:#09502C10;">
                        <i class="bi bi-shield-lock" style="font-size:1.8rem;color:#09502C;"></i>
                    </div>
                    <h1 class="h4 mb-1">Espace administrateur</h1>
                    <p class="text-muted small mb-0">
                        Connectez-vous pour gérer les messages, la galerie photos et le contenu du site.
                    </p>
                </div>

                {# Carte de login #}
                <div class="card border-0 shadow-sm rounded-4" style="overflow: hidden;">
                    <div class="card-body p-4 p-md-4">

                        {# Message d’erreur éventuel #}
                        {% if error %}
                            <div class="alert alert-danger small mb-3" role="alert">
                                <i class="bi bi-exclamation-triangle-fill me-1"></i>
                                {{ error.messageKey|trans(error.messageData, 'security') }}
                            </div>
                        {% endif %}

                        <form action="{{ path('app_login') }}" method="post" novalidate>
                            {# Email #}
                            <div class="mb-3">
                                <label for="username" class="form-label small fw-semibold">
                                    Adresse e-mail
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-end-0">
                                        <i class="bi bi-envelope"></i>
                                    </span>
                                    <input
                                        type="email"
                                        id="username"
                                        name="_username"
                                        class="form-control border-start-0"
                                        value="{{ last_username }}"
                                        required
                                        autocomplete="email"
                                        placeholder="vous@exemple.fr"
                                    >
                                </div>
                            </div>

                            {# Mot de passe #}
                            <div class="mb-3">
                                <label for="password" class="form-label small fw-semibold">
                                    Mot de passe
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-end-0">
                                        <i class="bi bi-key"></i>
                                    </span>
                                    <input
                                        type="password"
                                        id="password"
                                        name="_password"
                                        class="form-control border-start-0"
                                        required
                                        autocomplete="current-password"
                                        placeholder="Votre mot de passe"
                                    >
                                </div>
                            </div>

                            {# CSRF token #}
                            <input
                                type="hidden"
                                name="_csrf_token"
                                data-controller="csrf-protection"
                                value="{{ csrf_token('authenticate') }}"
                            >

                            {# Bouton #}
                            <div class="d-grid mt-4">
                                <button type="submit" class="btn btn-success"
                                        style="background:#09502C;border-color:#09502C;border-radius:999px;">
                                    <i class="bi bi-box-arrow-in-right me-1"></i>
                                    Se connecter
                                </button>
                            </div>
                        </form>

                    </div>
                </div>

                {# Petit texte de rassurance #}
                <p class="text-center text-muted small mt-3 mb-0">
                    Accès réservé à l’administration du site BSM L'Aiguiz'Eure.
                </p>

            </div>
        </div>
    </div>
</main>
{% endblock %}

